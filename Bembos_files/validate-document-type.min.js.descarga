define(['jquery','jquery/validate','mage/mage'],function($){'use strict';return function(target){$.validator.addMethod("validate-document-type",function(value,element){let validator=this;let type=getType(element);if(type===1){validator.validateMessage=$.mage.__('Please insert a valid DNI.');return/^[0-9]+$/.test(value)&&value.length===8;}else if(type===4){validator.validateMessage=$.mage.__('Please insert a valid passport/DNI');return/^[a-zA-Z0-9]+$/.test(value)&&(value.length<=12&&value.length>=9);}else if(type===7){validator.validateMessage=$.mage.__('Please insert a valid passport');return/^[a-zA-Z0-9]+$/.test(value)&&(value.length>4&&value.length<=12);}else{validator.validateMessage=$.mage.__('Please select a document type');return false;}},function(){return this.validateMessage;});function getType(element){let type=null;type=$('.customer_document_type').val();if($(element).parents('.documento-container').length){type=$(element).parents('.documento-container').find('.customer_document_type').val();}
if(type==='DNI'){type=1;}
if(type==='CE'){type=4;}
return parseInt(type);}
return target;};});