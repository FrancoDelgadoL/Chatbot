define(['jquery','matchMedia','jquery-ui-modules/widget',],function($){'use strict';$.widget('mage.productItems',{options:{showActionsOnClick:false,showActionsOnHover:false,productItemSelector:'.product-item',productItemActionsSelector:'.product-item .product-item-inner-on-actions',quantityControl:false},actionEventType:0,_create:function(){this._bindActionsShown();this._bindQuantityControls();if(window.iasConfig){this.element.on('infiniteScrollRendered',this.addElementClasses.bind(this));}
this.bindSlickRefresh();},bindSlickRefresh:function(){if(this.element.hasClass('widget-product-carousel')){this.element.on('refresh',function(){this._bindActionsShown();}.bind(this));}},_bindActionsShown:function(){if(this.options.showActionsOnHover&&matchMedia('(pointer:fine)').matches){this.actionEventType=0;this.addElementClasses();this.element.on('mouseenter',this.options.productItemActionsSelector,function(e){$(e.currentTarget).addClass('product-item-inner-active');$(e.currentTarget).closest(this.options.productItemSelector).trigger('iasProductItemActionsShow',[]);}.bind(this)).on('mouseleave',this.options.productItemActionsSelector,function(e){$(e.currentTarget).removeClass('product-item-inner-active');$(e.currentTarget).closest(this.options.productItemSelector).trigger('iasProductItemActionsHide',[]);}.bind(this));}else{if(this.options.showActionsOnClick){this.actionEventType=1;this.addElementClasses();this.element.on('click',this.options.productItemActionsSelector+' [data-role="product-action-trigger"]',function(e){let productItemActions=$(e.currentTarget).closest(this.options.productItemActionsSelector)
productItemActions.toggleClass('product-item-inner-active');$(e.currentTarget).closest(this.options.productItemSelector).trigger((productItemActions.hasClass('product-item-inner-active'))?'iasProductItemActionsShow':'iasProductItemActionsHide',[]);}.bind(this));}}},addElementClasses:function(){if(this.actionEventType===0){this.element.find(this.options.productItemActionsSelector).addClass('product-item-inner-on-hover');}else{this.element.find(this.options.productItemActionsSelector).addClass('product-item-inner-on-click');}},_bindQuantityControls:function(){if(this.options.quantityControl){this.element.mage('itemsQuantityControl',this.options.quantityControl);}}});return $.mage.productItems;});