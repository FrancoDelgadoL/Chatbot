define(['jquery','slick'],function($){"use strict";return function(target){$.widget('mage.iasMenu',target,{options:{loadImagesDelay:10},_create:function(){this._loadImages();let numItems=$(".submenu").find('.category-item').length,deskSubmenu=$(".submenu").clone().prependTo(".submenu-content");$(deskSubmenu).addClass('submenu-desk').addClass('mobile-hide');$(".submenu").addClass('desktop-hide');$('.submenu-desk').slick({dots:false,infinite:true,slidesToShow:numItems,slidesToScroll:numItems,autoplay:false});},_open:function(openMenu){this.body.addClass(this.options.navOpenBodyClass);openMenu.addClass(this.options.activeClass);openMenu.find(this.options.parentTrigger).addClass(this.options.activeTriggerClass);openMenu.find(this.options.parentContent).addClass(this.options.activeContentClass).show();if(!openMenu.hasClass('level0')){openMenu.parent().closest(this.option.parent).addClass(this.options.activeChildrenContentClass)}
$('.submenu-desk').slick('refresh');},_init:function(){this.delay=this.options.delay;mediaCheck({media:'(max-width: '+(this.options.mobile.screenFrom)+'px)',entry:$.proxy(function(){this.viewportActive=3;this._refresh();this._toggleMobileMode();},this)});mediaCheck({media:'(min-width: '+(this.options.mobile.screenFrom+1)+'px)',entry:$.proxy(function(){this.viewportActive=1;this._refresh();if(this.options.hoverMenu){this._toggleDesktopMode();}else{this._toggleTabletMode();}},this)});this._assignControls()._listen();this._setActiveMenu();},_toggleDesktopMode:function(){this.element.addClass('menu-initialized');this._unbindEvents();var $parentEventTrigger=this.options.parent;if(this.options.onlyFirstLevelDesktop){this.element.addClass('menu-only-first-level');$parentEventTrigger+='.level0'}
var $this=this,$parent=null,events={},timeout=null,closeTimeout=null,closeEvent;events['click '+$parentEventTrigger+' .view-more']=function(event){event.preventDefault();event.stopPropagation();$(event.target).closest($this.options.submenu).toggleClass('view-more-active');};if(this.options.desktop.preventClick||this.isTouch){events['click '+$parentEventTrigger+' '+this.options.parentTrigger]=function(event){event.preventDefault();event.stopPropagation();if(!$this.triggerByHover){$this.clickEvent=true;$parent=$(event.target);if(!$parent.is($this.options.parent)){$parent=$(event.target).closest($this.options.parent);}
$this._closeSiblings($parent);if($parent.hasClass($this.options.activeClass)){$this._close($parent);}else{$this._open($parent);}}
setTimeout(function(){if($this.triggerByHover){event.stopPropagation();$this._close($(event.target).closest($this.options.parent));$this.triggerByHover=false;}},$this.options.hoverTimeout);};}
this._on(events);if(this.options.desktop.viewAll){this._setViewAll();}
if(this.options.desktop.viewMore){this._setViewMore();}},});return $.mage.iasMenu;};});